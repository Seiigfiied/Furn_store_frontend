{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../_services/product.service\";\nimport * as i3 from \"../_services/user-auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nfunction BuyProductComponent_tr_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"select\", 17, 18);\n    i0.ɵɵlistener(\"change\", function BuyProductComponent_tr_38_Template_select_change_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const product_r2 = restoredCtx.$implicit;\n      const _r3 = i0.ɵɵreference(7);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onQuantityChanged(_r3.value, product_r2.productId));\n    });\n    i0.ɵɵelementStart(8, \"option\", 19);\n    i0.ɵɵtext(9, \"1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"option\", 20);\n    i0.ɵɵtext(11, \"2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"option\", 21);\n    i0.ɵɵtext(13, \"3\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"option\", 22);\n    i0.ɵɵtext(15, \"4\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"option\", 23);\n    i0.ɵɵtext(17, \"5\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"option\", 24);\n    i0.ɵɵtext(19, \"6\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"option\", 25);\n    i0.ɵɵtext(21, \"7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"option\", 26);\n    i0.ɵɵtext(23, \"8\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"option\", 27);\n    i0.ɵɵtext(25, \"9\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"option\", 28);\n    i0.ɵɵtext(27, \"10\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(28, \"td\");\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", product_r2.productDiscountedPrice, \" \\u0440\\u0443\\u0431.\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.getQuantityForProduct(product_r2.productId));\n    i0.ɵɵadvance(23);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getCalculatedTotalSum(product_r2.productId, product_r2.productDiscountedPrice), \" \\u0440\\u0443\\u0431. \");\n  }\n}\nexport class BuyProductComponent {\n  constructor(activatedRoute, productService, router, userAuthService) {\n    this.activatedRoute = activatedRoute;\n    this.productService = productService;\n    this.router = router;\n    this.userAuthService = userAuthService;\n    this.productDetails = [];\n    this.isSingleProductCheckout = '';\n    this.orderDetails = {\n      fullName: this.getUserFullName(),\n      fullAddress: '',\n      contactNumber: '',\n      alternateContactNumber: '',\n      orderProductQuantityList: []\n    };\n  }\n  ngOnInit() {\n    this.productDetails = this.activatedRoute.snapshot.data['productDetails'];\n    this.isSingleProductCheckout = this.activatedRoute.snapshot.paramMap.get('isSingleProductCheckout');\n    this.productDetails.forEach(x => this.orderDetails.orderProductQuantityList.push({\n      productId: x.productId,\n      quantity: 1\n    }));\n  }\n  placeOrder(orderForm) {\n    this.productService.placeOrder(this.orderDetails, this.isSingleProductCheckout).subscribe(response => {\n      console.log(response);\n      orderForm.reset();\n      this.router.navigate(['/orderConfirmation']);\n    }, error => {\n      console.log(error);\n    });\n  }\n  getQuantityForProduct(productId) {\n    const filteredProduct = this.orderDetails.orderProductQuantityList.filter(productQuantity => productQuantity.productId === productId);\n    return filteredProduct[0].quantity;\n  }\n  getCalculatedTotalSum(productId, productDiscountedPrice) {\n    return this.getQuantityForProduct(productId) * productDiscountedPrice;\n  }\n  onQuantityChanged(quantity, productId) {\n    this.orderDetails.orderProductQuantityList.filter(orderProduct => orderProduct.productId === productId)[0].quantity = quantity;\n  }\n  getCalculatedGrandTotalSum() {\n    let grandTotal = 0;\n    this.orderDetails.orderProductQuantityList.forEach(productQuantity => {\n      const price = this.productDetails.filter(product => product.productId === productQuantity.productId)[0].productDiscountedPrice;\n      grandTotal += price * productQuantity.quantity;\n    });\n    return grandTotal;\n  }\n  getUserFullName() {\n    console.log(this.userAuthService.getUserFullName());\n    return this.userAuthService.getUserFullName();\n  }\n}\nBuyProductComponent.ɵfac = function BuyProductComponent_Factory(t) {\n  return new (t || BuyProductComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.UserAuthService));\n};\nBuyProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BuyProductComponent,\n  selectors: [[\"app-buy-product\"]],\n  decls: 46,\n  vars: 6,\n  consts: [[1, \"container\", \"mt-5\"], [1, \"card\", \"p-3\"], [1, \"row\"], [1, \"col-6\"], [3, \"ngSubmit\"], [\"orderForm\", \"ngForm\"], [\"appearance\", \"outline\", 1, \"w-100\"], [\"name\", \"fullName\", \"matInput\", \"\", \"placeholder\", \"\\u0418\\u0432\\u0430\\u043D\\u043E\\u0432 \\u0418\\u0432\\u0430\\u043D \\u0418\\u0432\\u0430\\u043D\\u043E\\u0432\\u0438\\u0447\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"fullAddress\", \"matInput\", \"\", \"placeholder\", \"\\u041C\\u043E\\u0441\\u043A\\u0432\\u0430, \\u0433. \\u041C\\u043E\\u0441\\u043A\\u0432\\u0430, \\u0443\\u043B. \\u041F\\u0443\\u0448\\u043A\\u0438\\u043D\\u0430, \\u0434. 5-\\u0411, \\u043A. 3, \\u0441\\u0442\\u0440. 4\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"contactNumber\", \"matInput\", \"\", \"placeholder\", \"+7-222-12-12\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"alternateContactNumber\", \"matInput\", \"\", \"placeholder\", \"+7-333-13-13\", 3, \"ngModel\", \"ngModelChange\"], [\"align\", \"right\"], [\"type\", \"submit\", \"mat-stroked-button\", \"\", \"color\", \"primary\"], [1, \"table\"], [1, \"thead\"], [1, \"tbody\"], [4, \"ngFor\", \"ngForOf\"], [1, \"form-select\", 3, \"ngModel\", \"change\"], [\"quantity\", \"\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"value\", \"3\"], [\"value\", \"4\"], [\"value\", \"5\"], [\"value\", \"6\"], [\"value\", \"7\"], [\"value\", \"8\"], [\"value\", \"9\"], [\"value\", \"10\"]],\n  template: function BuyProductComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r6 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"form\", 4, 5);\n      i0.ɵɵlistener(\"ngSubmit\", function BuyProductComponent_Template_form_ngSubmit_4_listener() {\n        i0.ɵɵrestoreView(_r6);\n        const _r0 = i0.ɵɵreference(5);\n        return i0.ɵɵresetView(ctx.placeOrder(_r0));\n      });\n      i0.ɵɵelementStart(6, \"mat-form-field\", 6)(7, \"mat-label\");\n      i0.ɵɵtext(8, \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F (\\u0424\\u0418\\u041E)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function BuyProductComponent_Template_input_ngModelChange_9_listener($event) {\n        return ctx.orderDetails.fullName = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"mat-form-field\", 6)(11, \"mat-label\");\n      i0.ɵɵtext(12, \"\\u041F\\u043E\\u043B\\u043D\\u044B\\u0439 \\u0430\\u0434\\u0440\\u0435\\u0441\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function BuyProductComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.orderDetails.fullAddress = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"mat-form-field\", 6)(15, \"mat-label\");\n      i0.ɵɵtext(16, \"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function BuyProductComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.orderDetails.contactNumber = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"mat-form-field\", 6)(19, \"mat-label\");\n      i0.ɵɵtext(20, \"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function BuyProductComponent_Template_input_ngModelChange_21_listener($event) {\n        return ctx.orderDetails.alternateContactNumber = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\", 11)(23, \"button\", 12);\n      i0.ɵɵtext(24, \" \\u0421\\u0434\\u0435\\u043B\\u0430\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437 \");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(25, \"div\", 3)(26, \"table\", 13)(27, \"thead\", 14)(28, \"tr\")(29, \"th\");\n      i0.ɵɵtext(30, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"th\");\n      i0.ɵɵtext(32, \"\\u0426\\u0435\\u043D\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"th\");\n      i0.ɵɵtext(34, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"th\");\n      i0.ɵɵtext(36, \"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(37, \"tbody\", 15);\n      i0.ɵɵtemplate(38, BuyProductComponent_tr_38_Template, 30, 4, \"tr\", 16);\n      i0.ɵɵelementStart(39, \"tr\");\n      i0.ɵɵelement(40, \"td\")(41, \"td\");\n      i0.ɵɵelementStart(42, \"td\");\n      i0.ɵɵtext(43, \"\\u0412\\u0441\\u0435\\u0433\\u043E\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"td\");\n      i0.ɵɵtext(45);\n      i0.ɵɵelementEnd()()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.orderDetails.fullName);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.orderDetails.fullAddress);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.orderDetails.contactNumber);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.orderDetails.alternateContactNumber);\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngForOf\", ctx.productDetails);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\"\", ctx.getCalculatedGrandTotalSum(), \" \\u0440\\u0443\\u0431.\");\n    }\n  },\n  dependencies: [i4.NgForOf, i5.ɵNgNoValidate, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm, i6.MatButton, i7.MatFormField, i7.MatLabel, i8.MatInput],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","BuyProductComponent","constructor","activatedRoute","productService","router","userAuthService","fullName","getUserFullName","fullAddress","contactNumber","alternateContactNumber","orderProductQuantityList","ngOnInit","productDetails","snapshot","data","isSingleProductCheckout","paramMap","get","forEach","x","orderDetails","push","productId","quantity","placeOrder","orderForm","subscribe","response","console","log","reset","navigate","error","getQuantityForProduct","filteredProduct","filter","productQuantity","getCalculatedTotalSum","productDiscountedPrice","onQuantityChanged","orderProduct","getCalculatedGrandTotalSum","grandTotal","price","product","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\hit\\Git\\Course_work\\src\\app\\buy-product\\buy-product.component.html","C:\\hit\\Git\\Course_work\\src\\app\\buy-product\\buy-product.component.ts"],"sourcesContent":["<div class=\"container mt-5\">\r\n  <div class=\"card p-3\">\r\n    <div class=\"row\">\r\n      <div class=\"col-6\">\r\n        <form #orderForm=\"ngForm\" (ngSubmit)=\"placeOrder(orderForm)\">\r\n          <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n            <mat-label>Полное имя (ФИО)</mat-label>\r\n            <input\r\n              name=\"fullName\"\r\n              matInput\r\n              placeholder=\"Иванов Иван Иванович\"\r\n              [(ngModel)]=\"orderDetails.fullName\"\r\n            />\r\n          </mat-form-field>\r\n\r\n          <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n            <mat-label>Полный адрес</mat-label>\r\n            <input\r\n              name=\"fullAddress\"\r\n              matInput\r\n              placeholder=\"Москва, г. Москва, ул. Пушкина, д. 5-Б, к. 3, стр. 4\"\r\n              [(ngModel)]=\"orderDetails.fullAddress\"\r\n            />\r\n          </mat-form-field>\r\n\r\n          <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n            <mat-label>Контактный номер телефона</mat-label>\r\n            <input\r\n              name=\"contactNumber\"\r\n              matInput\r\n              placeholder=\"+7-222-12-12\"\r\n              [(ngModel)]=\"orderDetails.contactNumber\"\r\n            />\r\n          </mat-form-field>\r\n\r\n          <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n            <mat-label>Дополнительный номер телефона</mat-label>\r\n            <input\r\n              name=\"alternateContactNumber\"\r\n              matInput\r\n              placeholder=\"+7-333-13-13\"\r\n              [(ngModel)]=\"orderDetails.alternateContactNumber\"\r\n            />\r\n          </mat-form-field>\r\n\r\n          <div align=\"right\">\r\n            <button type=\"submit\" mat-stroked-button color=\"primary\">\r\n              Сделать заказ\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div class=\"col-6\">\r\n        <table class=\"table\">\r\n          <thead class=\"thead\">\r\n            <tr>\r\n              <th>Название</th>\r\n              <th>Цена</th>\r\n              <th>Количество</th>\r\n              <th>Общая сумма</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody class=\"tbody\">\r\n            <tr *ngFor=\"let product of productDetails\">\r\n              <td>{{ product.productName }}</td>\r\n              <td>{{ product.productDiscountedPrice }} руб.</td>\r\n              <td>\r\n                <select\r\n                  #quantity\r\n                  class=\"form-select\"\r\n                  [ngModel]=\"getQuantityForProduct(product.productId)\"\r\n                  (change)=\"\r\n                    onQuantityChanged(quantity.value, product.productId)\r\n                  \"\r\n                >\r\n                  <option value=\"1\">1</option>\r\n                  <option value=\"2\">2</option>\r\n                  <option value=\"3\">3</option>\r\n                  <option value=\"4\">4</option>\r\n                  <option value=\"5\">5</option>\r\n                  <option value=\"6\">6</option>\r\n                  <option value=\"7\">7</option>\r\n                  <option value=\"8\">8</option>\r\n                  <option value=\"9\">9</option>\r\n                  <option value=\"10\">10</option>\r\n                </select>\r\n              </td>\r\n\r\n              <td>\r\n                {{\r\n                  getCalculatedTotalSum(\r\n                    product.productId,\r\n                    product.productDiscountedPrice\r\n                  )\r\n                }}\r\n                руб.\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td></td>\r\n              <td></td>\r\n              <td>Всего</td>\r\n              <td>{{ getCalculatedGrandTotalSum() }} руб.</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- [(ngModel)]=\"product.productName\" -->\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { OrderDetails } from '../_model/order-details.model';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Product } from '../_model/product.model';\r\nimport { ProductService } from '../_services/product.service';\r\nimport { UserAuthService } from '../_services/user-auth.service';\r\n\r\n@Component({\r\n  selector: 'app-buy-product',\r\n  templateUrl: './buy-product.component.html',\r\n  styleUrls: ['./buy-product.component.css'],\r\n})\r\nexport class BuyProductComponent implements OnInit {\r\n  productDetails: Product[] = [];\r\n\r\n  isSingleProductCheckout: string | any = '';\r\n  orderDetails: OrderDetails = {\r\n    fullName: this.getUserFullName(),\r\n    fullAddress: '',\r\n    contactNumber: '',\r\n    alternateContactNumber: '',\r\n    orderProductQuantityList: [],\r\n  };\r\n\r\n  constructor(\r\n    private activatedRoute: ActivatedRoute,\r\n    private productService: ProductService,\r\n    private router: Router,\r\n    private userAuthService: UserAuthService\r\n  ) {}\r\n  ngOnInit(): void {\r\n    this.productDetails = this.activatedRoute.snapshot.data['productDetails'];\r\n    this.isSingleProductCheckout = this.activatedRoute.snapshot.paramMap.get(\r\n      'isSingleProductCheckout'\r\n    );\r\n    this.productDetails.forEach((x) =>\r\n      this.orderDetails.orderProductQuantityList.push({\r\n        productId: x.productId,\r\n        quantity: 1,\r\n      })\r\n    );\r\n  }\r\n\r\n  public placeOrder(orderForm: NgForm) {\r\n    this.productService\r\n      .placeOrder(this.orderDetails, this.isSingleProductCheckout)\r\n      .subscribe(\r\n        (response) => {\r\n          console.log(response);\r\n          orderForm.reset();\r\n          this.router.navigate(['/orderConfirmation']);\r\n        },\r\n        (error) => {\r\n          console.log(error);\r\n        }\r\n      );\r\n  }\r\n\r\n  getQuantityForProduct(productId: any) {\r\n    const filteredProduct = this.orderDetails.orderProductQuantityList.filter(\r\n      (productQuantity) => productQuantity.productId === productId\r\n    );\r\n\r\n    return filteredProduct[0].quantity;\r\n  }\r\n\r\n  getCalculatedTotalSum(productId: any, productDiscountedPrice: number) {\r\n    return this.getQuantityForProduct(productId) * productDiscountedPrice;\r\n  }\r\n\r\n  onQuantityChanged(quantity: number | any, productId: any) {\r\n    this.orderDetails.orderProductQuantityList.filter(\r\n      (orderProduct) => orderProduct.productId === productId\r\n    )[0].quantity = quantity;\r\n  }\r\n\r\n  getCalculatedGrandTotalSum() {\r\n    let grandTotal = 0;\r\n\r\n    this.orderDetails.orderProductQuantityList.forEach((productQuantity) => {\r\n      const price = this.productDetails.filter(\r\n        (product) => product.productId === productQuantity.productId\r\n      )[0].productDiscountedPrice;\r\n\r\n      grandTotal += price * productQuantity.quantity;\r\n    });\r\n\r\n    return grandTotal;\r\n  }\r\n\r\n  getUserFullName(): string {\r\n    console.log(this.userAuthService.getUserFullName());\r\n    return this.userAuthService.getUserFullName();\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}