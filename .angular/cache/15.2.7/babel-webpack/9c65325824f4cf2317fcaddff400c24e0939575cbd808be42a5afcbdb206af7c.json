{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../_services/product.service\";\nimport * as i3 from \"../_services/user-auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nfunction BuyProductComponent_tr_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"select\", 17, 18);\n    i0.ɵɵlistener(\"change\", function BuyProductComponent_tr_38_Template_select_change_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const product_r2 = restoredCtx.$implicit;\n      const _r3 = i0.ɵɵreference(7);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onQuantityChanged(_r3.value, product_r2.productId));\n    });\n    i0.ɵɵelementStart(8, \"option\", 19);\n    i0.ɵɵtext(9, \"1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"option\", 20);\n    i0.ɵɵtext(11, \"2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"option\", 21);\n    i0.ɵɵtext(13, \"3\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"option\", 22);\n    i0.ɵɵtext(15, \"4\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"option\", 23);\n    i0.ɵɵtext(17, \"5\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"option\", 24);\n    i0.ɵɵtext(19, \"6\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"option\", 25);\n    i0.ɵɵtext(21, \"7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"option\", 26);\n    i0.ɵɵtext(23, \"8\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"option\", 27);\n    i0.ɵɵtext(25, \"9\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"option\", 28);\n    i0.ɵɵtext(27, \"10\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(28, \"td\");\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", product_r2.productDiscountedPrice, \" \\u0440\\u0443\\u0431.\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.getQuantityForProduct(product_r2.productId));\n    i0.ɵɵadvance(23);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getCalculatedTotalSum(product_r2.productId, product_r2.productDiscountedPrice), \" \\u0440\\u0443\\u0431. \");\n  }\n}\nexport let BuyProductComponent = /*#__PURE__*/(() => {\n  class BuyProductComponent {\n    constructor(activatedRoute, productService, router, userAuthService) {\n      this.activatedRoute = activatedRoute;\n      this.productService = productService;\n      this.router = router;\n      this.userAuthService = userAuthService;\n      this.productDetails = [];\n      this.isSingleProductCheckout = '';\n      this.orderDetails = {\n        fullName: this.getUserFullName(),\n        fullAddress: '',\n        contactNumber: '',\n        alternateContactNumber: '',\n        orderProductQuantityList: []\n      };\n    }\n    ngOnInit() {\n      this.productDetails = this.activatedRoute.snapshot.data['productDetails'];\n      this.isSingleProductCheckout = this.activatedRoute.snapshot.paramMap.get('isSingleProductCheckout');\n      this.productDetails.forEach(x => this.orderDetails.orderProductQuantityList.push({\n        productId: x.productId,\n        quantity: 1\n      }));\n    }\n    placeOrder(orderForm) {\n      this.productService.placeOrder(this.orderDetails, this.isSingleProductCheckout).subscribe(response => {\n        console.log(response);\n        orderForm.reset();\n        this.router.navigate(['/orderConfirmation']);\n      }, error => {\n        console.log(error);\n      });\n    }\n    getQuantityForProduct(productId) {\n      const filteredProduct = this.orderDetails.orderProductQuantityList.filter(productQuantity => productQuantity.productId === productId);\n      return filteredProduct[0].quantity;\n    }\n    getCalculatedTotalSum(productId, productDiscountedPrice) {\n      return this.getQuantityForProduct(productId) * productDiscountedPrice;\n    }\n    onQuantityChanged(quantity, productId) {\n      this.orderDetails.orderProductQuantityList.filter(orderProduct => orderProduct.productId === productId)[0].quantity = quantity;\n    }\n    getCalculatedGrandTotalSum() {\n      let grandTotal = 0;\n      this.orderDetails.orderProductQuantityList.forEach(productQuantity => {\n        const price = this.productDetails.filter(product => product.productId === productQuantity.productId)[0].productDiscountedPrice;\n        grandTotal += price * productQuantity.quantity;\n      });\n      return grandTotal;\n    }\n    getUserFullName() {\n      console.log(this.userAuthService.getUserFullName());\n      return this.userAuthService.getUserFullName();\n    }\n  }\n  BuyProductComponent.ɵfac = function BuyProductComponent_Factory(t) {\n    return new (t || BuyProductComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.UserAuthService));\n  };\n  BuyProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BuyProductComponent,\n    selectors: [[\"app-buy-product\"]],\n    decls: 46,\n    vars: 6,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"card\", \"p-3\"], [1, \"row\"], [1, \"col-6\"], [3, \"ngSubmit\"], [\"orderForm\", \"ngForm\"], [\"appearance\", \"outline\", 1, \"w-100\"], [\"name\", \"fullName\", \"matInput\", \"\", \"placeholder\", \"\\u0418\\u0432\\u0430\\u043D\\u043E\\u0432 \\u0418\\u0432\\u0430\\u043D \\u0418\\u0432\\u0430\\u043D\\u043E\\u0432\\u0438\\u0447\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"fullAddress\", \"matInput\", \"\", \"placeholder\", \"\\u041C\\u043E\\u0441\\u043A\\u0432\\u0430, \\u0433. \\u041C\\u043E\\u0441\\u043A\\u0432\\u0430, \\u0443\\u043B. \\u041F\\u0443\\u0448\\u043A\\u0438\\u043D\\u0430, \\u0434. 5-\\u0411, \\u043A. 3, \\u0441\\u0442\\u0440. 4\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"contactNumber\", \"matInput\", \"\", \"placeholder\", \"+7-222-12-12\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"alternateContactNumber\", \"matInput\", \"\", \"placeholder\", \"+7-333-13-13\", 3, \"ngModel\", \"ngModelChange\"], [\"align\", \"right\"], [\"type\", \"submit\", \"mat-stroked-button\", \"\", \"color\", \"primary\"], [1, \"table\"], [1, \"thead\"], [1, \"tbody\"], [4, \"ngFor\", \"ngForOf\"], [1, \"form-select\", 3, \"ngModel\", \"change\"], [\"quantity\", \"\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"value\", \"3\"], [\"value\", \"4\"], [\"value\", \"5\"], [\"value\", \"6\"], [\"value\", \"7\"], [\"value\", \"8\"], [\"value\", \"9\"], [\"value\", \"10\"]],\n    template: function BuyProductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r6 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"form\", 4, 5);\n        i0.ɵɵlistener(\"ngSubmit\", function BuyProductComponent_Template_form_ngSubmit_4_listener() {\n          i0.ɵɵrestoreView(_r6);\n          const _r0 = i0.ɵɵreference(5);\n          return i0.ɵɵresetView(ctx.placeOrder(_r0));\n        });\n        i0.ɵɵelementStart(6, \"mat-form-field\", 6)(7, \"mat-label\");\n        i0.ɵɵtext(8, \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F (\\u0424\\u0418\\u041E)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function BuyProductComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.orderDetails.fullName = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"mat-form-field\", 6)(11, \"mat-label\");\n        i0.ɵɵtext(12, \"\\u041F\\u043E\\u043B\\u043D\\u044B\\u0439 \\u0430\\u0434\\u0440\\u0435\\u0441\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function BuyProductComponent_Template_input_ngModelChange_13_listener($event) {\n          return ctx.orderDetails.fullAddress = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"mat-form-field\", 6)(15, \"mat-label\");\n        i0.ɵɵtext(16, \"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function BuyProductComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.orderDetails.contactNumber = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"mat-form-field\", 6)(19, \"mat-label\");\n        i0.ɵɵtext(20, \"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function BuyProductComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.orderDetails.alternateContactNumber = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 11)(23, \"button\", 12);\n        i0.ɵɵtext(24, \" \\u0421\\u0434\\u0435\\u043B\\u0430\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437 \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(25, \"div\", 3)(26, \"table\", 13)(27, \"thead\", 14)(28, \"tr\")(29, \"th\");\n        i0.ɵɵtext(30, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"th\");\n        i0.ɵɵtext(32, \"\\u0426\\u0435\\u043D\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"th\");\n        i0.ɵɵtext(34, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"th\");\n        i0.ɵɵtext(36, \"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(37, \"tbody\", 15);\n        i0.ɵɵtemplate(38, BuyProductComponent_tr_38_Template, 30, 4, \"tr\", 16);\n        i0.ɵɵelementStart(39, \"tr\");\n        i0.ɵɵelement(40, \"td\")(41, \"td\");\n        i0.ɵɵelementStart(42, \"td\");\n        i0.ɵɵtext(43, \"\\u0412\\u0441\\u0435\\u0433\\u043E\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"td\");\n        i0.ɵɵtext(45);\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.orderDetails.fullName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.orderDetails.fullAddress);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.orderDetails.contactNumber);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.orderDetails.alternateContactNumber);\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"ngForOf\", ctx.productDetails);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\"\", ctx.getCalculatedGrandTotalSum(), \" \\u0440\\u0443\\u0431.\");\n      }\n    },\n    dependencies: [i4.NgForOf, i5.ɵNgNoValidate, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm, i6.MatButton, i7.MatFormField, i7.MatLabel, i8.MatInput]\n  });\n  return BuyProductComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}