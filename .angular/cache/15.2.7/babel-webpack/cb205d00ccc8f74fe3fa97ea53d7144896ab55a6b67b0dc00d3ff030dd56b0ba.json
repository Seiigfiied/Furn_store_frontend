{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/user.service\";\nimport * as i2 from \"../_services/user-auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nexport class LoginComponent {\n  constructor(userService, userAuthService, router) {\n    this.userService = userService;\n    this.userAuthService = userAuthService;\n    this.router = router;\n  }\n  login(loginForm) {\n    this.userService.login(loginForm.value).subscribe(response => {\n      this.userAuthService.setRoles(response.user.roles);\n      this.userAuthService.setToken(response.jwtToken);\n      this.userAuthService.setUserFullName(response.user.userFirstName, response.user.userLastName);\n      const role = response.user.roles[0].roleName;\n      if (role === 'Admin') {\n        this.router.navigate(['/admin']);\n      } else {\n        this.router.navigate(['/user']);\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n  registerUser() {\n    this.router.navigate(['/register']);\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.UserAuthService), i0.ɵɵdirectiveInject(i3.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 22,\n  vars: 0,\n  consts: [[1, \"container\", \"mt-5\"], [1, \"card\", 2, \"padding\", \"20px\"], [3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [\"appearance\", \"outline\", 1, \"w-100\"], [\"matInput\", \"\", \"placeholder\", \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043B\\u043E\\u0433\\u0438\\u043D\", \"ngModel\", \"\", \"name\", \"userName\", \"id\", \"userName\"], [\"type\", \"password\", \"matInput\", \"\", \"placeholder\", \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\", \"ngModel\", \"\", \"name\", \"userPassword\", \"id\", \"userPassword\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", 1, \"w-100\"], [1, \"card\", \"text-center\", \"mt-3\", \"p-3\"], [\"type\", \"button\", \"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"mt-2\", 2, \"width\", \"30%\", \"left\", \"50%\", \"transform\", \"translateX(-50%)\", 3, \"click\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r1 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2, 3);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_2_listener() {\n        i0.ɵɵrestoreView(_r1);\n        const _r0 = i0.ɵɵreference(3);\n        return i0.ɵɵresetView(ctx.login(_r0));\n      });\n      i0.ɵɵelementStart(4, \"mat-form-field\", 4)(5, \"mat-label\");\n      i0.ɵɵtext(6, \"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 5);\n      i0.ɵɵelementStart(8, \"mat-hint\");\n      i0.ɵɵtext(9, \"\\u041B\\u043E\\u0433\\u0438\\u043D\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"mat-form-field\", 4)(11, \"mat-label\");\n      i0.ɵɵtext(12, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 6);\n      i0.ɵɵelementStart(14, \"mat-hint\");\n      i0.ɵɵtext(15, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"button\", 7);\n      i0.ɵɵtext(17, \" \\u0412\\u043E\\u0439\\u0442\\u0438 \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"div\", 8);\n      i0.ɵɵtext(19, \" \\u0412\\u043F\\u0435\\u0440\\u0432\\u044B\\u0435 \\u0432 \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\\u0435? \\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u0439\\u0442\\u0435\\u0441\\u044C \\u0441\\u0435\\u0439\\u0447\\u0430\\u0441! \");\n      i0.ɵɵelementStart(20, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_20_listener() {\n        return ctx.registerUser();\n      });\n      i0.ɵɵtext(21, \" \\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F \");\n      i0.ɵɵelementEnd()()()();\n    }\n  },\n  dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm, i5.MatButton, i6.MatFormField, i6.MatLabel, i6.MatHint, i7.MatInput],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;;AAWA,OAAM,MAAOA,cAAc;EACzBC,YACUC,WAAwB,EACxBC,eAAgC,EAChCC,MAAc;IAFd,gBAAW,GAAXF,WAAW;IACX,oBAAe,GAAfC,eAAe;IACf,WAAM,GAANC,MAAM;EACb;EAEHC,KAAK,CAACC,SAAiB;IACrB,IAAI,CAACJ,WAAW,CAACG,KAAK,CAACC,SAAS,CAACC,KAAK,CAAC,CAACC,SAAS,CAC9CC,QAAa,IAAI;MAChB,IAAI,CAACN,eAAe,CAACO,QAAQ,CAACD,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;MAClD,IAAI,CAACT,eAAe,CAACU,QAAQ,CAACJ,QAAQ,CAACK,QAAQ,CAAC;MAChD,IAAI,CAACX,eAAe,CAACY,eAAe,CAClCN,QAAQ,CAACE,IAAI,CAACK,aAAa,EAC3BP,QAAQ,CAACE,IAAI,CAACM,YAAY,CAC3B;MAED,MAAMC,IAAI,GAAGT,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,CAACO,QAAQ;MAC5C,IAAID,IAAI,KAAK,OAAO,EAAE;QACpB,IAAI,CAACd,MAAM,CAACgB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;OACjC,MAAM;QACL,IAAI,CAAChB,MAAM,CAACgB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;;IAEnC,CAAC,EACAC,KAAK,IAAI;MACRC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CACF;EACH;EAEAG,YAAY;IACV,IAAI,CAACpB,MAAM,CAACgB,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;EACrC;;AAhCWpB,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAyB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;MCX3BC,8BAA4B;MAEEA;QAAAA;QAAA;QAAA,OAAYA,6BAAgB;MAAA,EAAC;MACrDA,yCAAmD;MACtCA,2GAAgB;MAAAA,iBAAY;MACvCA,2BAME;MACFA,gCAAU;MAAAA,8CAAK;MAAAA,iBAAW;MAG5BA,0CAAmD;MACtCA,qDAAM;MAAAA,iBAAY;MAC7BA,4BAOE;MACFA,iCAAU;MAAAA,qDAAM;MAAAA,iBAAW;MAG7BA,kCAAsE;MACpEA,iDACF;MAAAA,iBAAS;MAEXA,+BAAuC;MACrCA,mQAEA;MAAAA,kCAOC;MADCA;QAAA,OAASC,kBAAc;MAAA,EAAC;MAExBD,qFACF;MAAAA,iBAAS","names":["LoginComponent","constructor","userService","userAuthService","router","login","loginForm","value","subscribe","response","setRoles","user","roles","setToken","jwtToken","setUserFullName","userFirstName","userLastName","role","roleName","navigate","error","console","log","registerUser","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\hit\\Git\\Course-work.-Construction-materials-store-FRONT-end\\src\\app\\login\\login.component.ts","C:\\hit\\Git\\Course-work.-Construction-materials-store-FRONT-end\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { UserService } from '../_services/user.service';\r\nimport { UserAuthService } from '../_services/user-auth.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css'],\r\n})\r\nexport class LoginComponent {\r\n  constructor(\r\n    private userService: UserService,\r\n    private userAuthService: UserAuthService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  login(loginForm: NgForm) {\r\n    this.userService.login(loginForm.value).subscribe(\r\n      (response: any) => {\r\n        this.userAuthService.setRoles(response.user.roles);\r\n        this.userAuthService.setToken(response.jwtToken);\r\n        this.userAuthService.setUserFullName(\r\n          response.user.userFirstName,\r\n          response.user.userLastName\r\n        );\r\n\r\n        const role = response.user.roles[0].roleName;\r\n        if (role === 'Admin') {\r\n          this.router.navigate(['/admin']);\r\n        } else {\r\n          this.router.navigate(['/user']);\r\n        }\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  registerUser() {\r\n    this.router.navigate(['/register']);\r\n  }\r\n}\r\n","<div class=\"container mt-5\">\r\n  <div class=\"card\" style=\"padding: 20px\">\r\n    <form #loginForm=\"ngForm\" (ngSubmit)=\"login(loginForm)\">\r\n      <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n        <mat-label>Имя пользователя</mat-label>\r\n        <input\r\n          matInput\r\n          placeholder=\"Введите ваш логин\"\r\n          ngModel\r\n          name=\"userName\"\r\n          id=\"userName\"\r\n        />\r\n        <mat-hint>Логин</mat-hint>\r\n      </mat-form-field>\r\n\r\n      <mat-form-field appearance=\"outline\" class=\"w-100\">\r\n        <mat-label>Пароль</mat-label>\r\n        <input\r\n          type=\"password\"\r\n          matInput\r\n          placeholder=\"Введите ваш пароль\"\r\n          ngModel\r\n          name=\"userPassword\"\r\n          id=\"userPassword\"\r\n        />\r\n        <mat-hint>Пароль</mat-hint>\r\n      </mat-form-field>\r\n\r\n      <button mat-raised-button color=\"primary\" type=\"submit\" class=\"w-100\">\r\n        Войти\r\n      </button>\r\n    </form>\r\n    <div class=\"card text-center mt-3 p-3\">\r\n      Впервые в магазине? Зарегистрируйтесь сейчас!\r\n\r\n      <button\r\n        class=\"mt-2\"\r\n        type=\"button\"\r\n        mat-raised-button\r\n        color=\"primary\"\r\n        style=\"width: 30%; left: 50%; transform: translateX(-50%)\"\r\n        (click)=\"registerUser()\"\r\n      >\r\n        Регистрация\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}